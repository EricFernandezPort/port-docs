---
id: aggregate-entities-over-time
title: "Aggregate entities over time"
description: "This route allows you to perform an aggregation function on a blueprint's entities over a given time range.<br/><br/>To learn more about entities, check out the [entity documentation](https://docs.getport.io/build-your-software-catalog/sync-data-to-catalog/#entities).<br/><br/>For more details about Port's search mechanism, rules, and operators - see the [search & query documentation](https://docs.getport.io/search-and-query/)."
sidebar_label: "Aggregate entities over time"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api-reference-temp/port-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Aggregate entities over time"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/v1/entities/aggregate-over-time"}
  context={"endpoint"}
>
  
</MethodEndpoint>



This route allows you to perform an aggregation function on a blueprint's entities over a given time range.<br/><br/>To learn more about entities, check out the [entity documentation](https://docs.getport.io/build-your-software-catalog/sync-data-to-catalog/#entities).<br/><br/>For more details about Port's search mechanism, rules, and operators - see the [search & query documentation](https://docs.getport.io/search-and-query/).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","required":["blueprint","timeRange","timeInterval","query","measureTimeBy","aggregationType"],"oneOf":[{"type":"object","title":"Aggregate property","properties":{"blueprint":{"type":"string","description":"The blueprint whose entities you wish to aggregate."},"timeRange":{"type":"object","properties":{"preset":{"type":"string","enum":["today","yesterday","lastDay","lastWeek","last2Weeks","lastMonth","last3Months","last6Months","last12Months"]},"timeZone":{"type":"string"}},"required":["preset"],"additionalProperties":false},"timeInterval":{"type":"string","enum":["hour","day","isoWeek","month"]},"query":{"description":"A [search query](https://docs.getport.io/search-and-query) used to filter the entities before the aggregation is calculated.","type":"object","properties":{"combinator":{"enum":["and","or"]},"rules":{"type":"array","items":{"anyOf":[{"type":"object","title":"Date rule","properties":{"property":{"type":"string"},"operator":{"enum":["between","notBetween","="]},"value":{"type":"object","oneOf":[{"type":"object","title":"Date range","properties":{"from":{"type":"string","format":"date-time"},"to":{"type":"string","format":"date-time"}},"required":["from","to"]},{"type":"object","title":"Date preset","properties":{"preset":{"type":"string","enum":["today","tomorrow","yesterday","lastWeek","last2Weeks","lastMonth","last3Months","last6Months","last12Months"]}},"required":["preset"]}]}},"required":["property","operator","value"],"additionalProperties":false},{"type":"object","title":"Empty rule","oneOf":[{"properties":{"operator":{"enum":["isEmpty","isNotEmpty"]},"property":{"type":"string"}},"required":["operator","property"],"additionalProperties":false}]},{"type":"object","title":"Numeric rule","properties":{"property":{"type":"string"},"operator":{"enum":[">",">=","<","<="]},"value":{"anyOf":[{"type":"number"},{"type":"string","format":"date-time"}]}},"required":["property","operator","value"],"additionalProperties":false},{"type":"object","title":"String rule","oneOf":[{"type":"object","properties":{"property":{"type":"string"},"operator":{"enum":["=","!=","containsAny","contains","doesNotContains","beginsWith","doesNotBeginsWith","endsWith","doesNotEndsWith","in","notIn"]},"value":{"anyOf":[{"type":"null"},{"type":"string"},{"type":"number"},{"type":"boolean"},{"type":"array","items":{"type":"string"}},{"type":"string","format":"date-time"}]}},"additionalProperties":false,"required":["property","operator","value"]}]},{"type":"object","title":"Relation rule","properties":{"operator":{"enum":["relatedTo"]},"blueprint":{"type":"string"},"value":{"anyOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"direction":{"enum":["upstream","downstream"]},"required":{"type":"boolean"}},"additionalProperties":false,"required":["operator","value","blueprint"]},{"type":"object","title":"Property schema rule","properties":{"propertySchema":{"type":"object","properties":{"type":{"type":"string"},"format":{"type":"string"},"items":{"type":"object","properties":{"type":{"type":"string"},"format":{"type":"string"}},"required":["type"]}},"required":["type"],"additionalProperties":false},"operator":{"enum":["=","!=","contains"]},"value":{"anyOf":[{"type":"null"},{"type":"string"},{"type":"number"},{"type":"boolean"}]}},"required":["operator","propertySchema"],"additionalProperties":false},{"type":"object","properties":"circular()","required":["combinator","rules"],"additionalProperties":false,"title":"/schemas/entitiesQuery"}]}}},"required":["combinator","rules"],"additionalProperties":false,"title":"/schemas/entitiesQuery"},"measureTimeBy":{"type":"string","description":"A property of type `datetime` by which the aggregation will be calculated."},"aggregationType":{"enum":["aggregatePropertiesValues"]},"func":{"type":"string","enum":["average","sum","min","max","median","last"]},"properties":{"type":"array","description":"A list of properties of type `number` on which the aggregation will be calculated.","items":{"type":"string"}}},"required":["func","properties"],"additionalProperties":false},{"type":"object","title":"Count entities","properties":{"blueprint":{"type":"string","description":"The blueprint whose entities you wish to aggregate."},"timeRange":{"type":"object","properties":{"preset":{"type":"string","enum":["today","yesterday","lastDay","lastWeek","last2Weeks","lastMonth","last3Months","last6Months","last12Months"]},"timeZone":{"type":"string"}},"required":["preset"],"additionalProperties":false},"timeInterval":{"type":"string","enum":["hour","day","isoWeek","month"]},"query":{"description":"A [search query](https://docs.getport.io/search-and-query) used to filter the entities before the aggregation is calculated.","type":"object","properties":{"combinator":{"enum":["and","or"]},"rules":{"type":"array","items":{"anyOf":[{"type":"object","title":"Date rule","properties":{"property":{"type":"string"},"operator":{"enum":["between","notBetween","="]},"value":{"type":"object","oneOf":[{"type":"object","title":"Date range","properties":{"from":{"type":"string","format":"date-time"},"to":{"type":"string","format":"date-time"}},"required":["from","to"]},{"type":"object","title":"Date preset","properties":{"preset":{"type":"string","enum":["today","tomorrow","yesterday","lastWeek","last2Weeks","lastMonth","last3Months","last6Months","last12Months"]}},"required":["preset"]}]}},"required":["property","operator","value"],"additionalProperties":false},{"type":"object","title":"Empty rule","oneOf":[{"properties":{"operator":{"enum":["isEmpty","isNotEmpty"]},"property":{"type":"string"}},"required":["operator","property"],"additionalProperties":false}]},{"type":"object","title":"Numeric rule","properties":{"property":{"type":"string"},"operator":{"enum":[">",">=","<","<="]},"value":{"anyOf":[{"type":"number"},{"type":"string","format":"date-time"}]}},"required":["property","operator","value"],"additionalProperties":false},{"type":"object","title":"String rule","oneOf":[{"type":"object","properties":{"property":{"type":"string"},"operator":{"enum":["=","!=","containsAny","contains","doesNotContains","beginsWith","doesNotBeginsWith","endsWith","doesNotEndsWith","in","notIn"]},"value":{"anyOf":[{"type":"null"},{"type":"string"},{"type":"number"},{"type":"boolean"},{"type":"array","items":{"type":"string"}},{"type":"string","format":"date-time"}]}},"additionalProperties":false,"required":["property","operator","value"]}]},{"type":"object","title":"Relation rule","properties":{"operator":{"enum":["relatedTo"]},"blueprint":{"type":"string"},"value":{"anyOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"direction":{"enum":["upstream","downstream"]},"required":{"type":"boolean"}},"additionalProperties":false,"required":["operator","value","blueprint"]},{"type":"object","title":"Property schema rule","properties":{"propertySchema":{"type":"object","properties":{"type":{"type":"string"},"format":{"type":"string"},"items":{"type":"object","properties":{"type":{"type":"string"},"format":{"type":"string"}},"required":["type"]}},"required":["type"],"additionalProperties":false},"operator":{"enum":["=","!=","contains"]},"value":{"anyOf":[{"type":"null"},{"type":"string"},{"type":"number"},{"type":"boolean"}]}},"required":["operator","propertySchema"],"additionalProperties":false},{"type":"object","properties":"circular()","required":["combinator","rules"],"additionalProperties":false,"title":"/schemas/entitiesQuery"}]}}},"required":["combinator","rules"],"additionalProperties":false,"title":"/schemas/entitiesQuery"},"measureTimeBy":{"type":"string","description":"A property of type `datetime` by which the aggregation will be calculated."},"aggregationType":{"enum":["countEntities"]},"func":{"type":"string","enum":["count","average"]},"breakdownProperty":{"type":"string","description":"A blueprint's property by which you want to break down the data."}},"required":["func"],"additionalProperties":false}]}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Retrieved successfully.","content":{"application/json":{"schema":{"description":"Retrieved successfully.","type":"object","properties":{"ok":{"enum":[true]},"result":{"type":"object","properties":{"minDate":{"type":"number"},"maxDate":{"type":"number"},"data":{"type":"array","items":{"object":{"type":"object","properties":{"date":{"type":"number"}},"additionalProperties":{"type":"number"}}}}}}},"required":["ok"],"additionalProperties":false}}}}}}
>
  
</StatusCodes>


      